# Feature Specification: 인증/인가 시스템 및 알림 기능 구현

**Feature Branch**: `003-auth-system-enhancements`
**Created**: 2025-11-26
**Status**: Draft
**Input**: 새로운 기능 추가하는거고 기존에 있던 기능이랑 중복된 내용이 있으면 통합 해야해 Critical (즉시 필요) 1. 인증/인가 시스템 완전 누락 - 회원가입 API (POST /api/v1/auth/signup) - 로그인 API (POST /api/v1/auth/login) - 로그아웃 API (POST /api/v1/auth/logout) - JWT 토큰 발급/갱신 (Access + Refresh Token) - AuthController, UserService, JwtTokenProvider High Priority (완성도) 2. Edge Case 처리 검증 - 경계값 처리 (소득 정확히 일치) - 0개 매칭 시 명확한 메시지 - 에러 응답 표준화 3. OAuth 2.0 소셜 로그인 (Google, Kakao) 4. 알림 시스템 (이메일/Push) - 신규 청약 알림 - 마감 임박 알림 5. mysql, s3, redis 역할 명시 분리

## Clarifications

### Session 2025-11-26

- Q: DDD 도메인 경계 및 기존 코드 통합 전략 - 완전히 새로운 도메인 생성 vs 기존 도메인 확장 vs 전체 리팩토링? → A: 기존 User/Subscription 도메인을 확장하고 Authentication을 새로운 Bounded Context로 분리 (Option B)
- Q: 기존 User 엔티티 확장 방식 - 소셜 로그인 정보를 User 엔티티에 추가 vs 별도 SocialAccount 엔티티 vs UserProfile에 포함? → A: User 엔티티에 소셜 로그인 필드 추가 (provider, providerId 컬럼 추가, password nullable)
- Q: 알림 시스템 구현 범위 - 이메일+푸시 모두 vs 이메일만 vs 프레임워크만? → A: 이메일만 구현, 푸시는 인터페이스만 정의 (MVP 우선, 확장 가능 구조)
- Q: Refresh Token 저장 위치 - Redis vs MySQL vs 이중 저장? → A: Redis에 저장 (TTL 자동 관리, 빠른 조회, 7일 후 자동 삭제)
- Q: 기존 청약 매칭 시스템과 알림 시스템 통합 방법 - 직접 호출 vs Domain Event vs 배치 작업? → A: Domain Event 기반 통합 (SubscriptionCreated 이벤트 발행, 느슨한 결합, 확장 가능)

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 이메일/비밀번호 기반 회원가입 및 로그인 (Priority: P1)

사용자는 이메일과 비밀번호를 사용하여 계정을 생성하고, 생성된 계정으로 시스템에 로그인할 수 있어야 합니다. 로그인 후에는 안전하게 인증된 상태를 유지하며, 필요 시 로그아웃하여 세션을 종료할 수 있어야 합니다.

**Why this priority**: 모든 개인화 기능과 보안이 필요한 서비스의 기본이 되는 필수 기능입니다. 이 기능 없이는 사용자를 식별하고 데이터를 보호할 수 없습니다.

**Independent Test**: 새로운 사용자가 이메일과 비밀번호로 계정을 생성하고, 해당 계정으로 로그인하여 인증이 필요한 페이지에 접근할 수 있으며, 로그아웃 후에는 접근이 차단되는지 확인합니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 회원가입 페이지에 접속한 상태에서, **When** 유효한 이메일, 비밀번호, 이름을 입력하고 회원가입 버튼을 클릭하면, **Then** 계정이 생성되고 "회원가입이 완료되었습니다" 메시지가 표시됩니다.

2. **Given** 등록된 사용자가 로그인 페이지에 접속한 상태에서, **When** 올바른 이메일과 비밀번호를 입력하고 로그인 버튼을 클릭하면, **Then** 로그인에 성공하고 메인 페이지로 이동합니다.

3. **Given** 로그인한 사용자가 시스템을 사용 중인 상태에서, **When** 로그아웃 버튼을 클릭하면, **Then** 로그아웃되고 인증이 필요한 페이지 접근 시 로그인 페이지로 리다이렉트됩니다.

4. **Given** 사용자가 로그인 페이지에 접속한 상태에서, **When** 잘못된 비밀번호를 입력하고 로그인을 시도하면, **Then** "이메일 또는 비밀번호가 올바르지 않습니다" 메시지가 표시됩니다.

5. **Given** 사용자가 회원가입 페이지에 접속한 상태에서, **When** 이미 등록된 이메일로 회원가입을 시도하면, **Then** "이미 사용 중인 이메일입니다" 메시지가 표시됩니다.

---

### User Story 2 - 소셜 로그인 (Google, Kakao) (Priority: P2)

사용자는 Google 또는 Kakao 계정을 사용하여 간편하게 회원가입하고 로그인할 수 있어야 합니다. 소셜 로그인 시 필요한 기본 정보(이름, 이메일)는 자동으로 가져와집니다.

**Why this priority**: 사용자 편의성을 크게 향상시키고 가입 전환율을 높일 수 있는 중요한 기능이지만, 기본 인증 시스템이 먼저 구축되어야 합니다.

**Independent Test**: 사용자가 Google 또는 Kakao 로그인 버튼을 클릭하여 해당 플랫폼의 인증 과정을 거친 후, 별도의 회원가입 절차 없이 시스템에 로그인되고 프로필 정보가 자동으로 채워지는지 확인합니다.

**Acceptance Scenarios**:

1. **Given** 신규 사용자가 로그인 페이지에 접속한 상태에서, **When** "Google로 시작하기" 버튼을 클릭하고 Google 인증을 완료하면, **Then** 자동으로 계정이 생성되고 시스템에 로그인됩니다.

2. **Given** 신규 사용자가 로그인 페이지에 접속한 상태에서, **When** "Kakao로 시작하기" 버튼을 클릭하고 Kakao 인증을 완료하면, **Then** 자동으로 계정이 생성되고 시스템에 로그인됩니다.

3. **Given** 이미 Google로 가입한 사용자가 로그인 페이지에 접속한 상태에서, **When** "Google로 시작하기" 버튼을 클릭하면, **Then** 기존 계정으로 즉시 로그인됩니다.

4. **Given** 사용자가 소셜 로그인을 시도한 상태에서, **When** 소셜 플랫폼에서 인증을 취소하면, **Then** 로그인 페이지로 돌아가고 "로그인이 취소되었습니다" 메시지가 표시됩니다.

5. **Given** 이미 일반 계정으로 가입한 이메일로 Google 로그인을 시도한 상태에서, **When** Google 인증을 완료하면, **Then** "이미 가입된 이메일입니다. 기존 계정과 연동하시겠습니까?" 메시지가 표시됩니다.

6. **Given** 계정 연동 확인 메시지가 표시된 상태에서, **When** 사용자가 "연동하기"를 선택하면, **Then** Google 로그인 방법이 기존 계정에 추가되고 로그인됩니다.

7. **Given** 계정 연동 확인 메시지가 표시된 상태에서, **When** 사용자가 "취소"를 선택하면, **Then** 로그인이 취소되고 로그인 페이지로 돌아갑니다.

---

### User Story 3 - 토큰 기반 세션 관리 및 자동 갱신 (Priority: P1)

시스템은 로그인한 사용자의 세션을 안전하게 관리하며, 사용자가 서비스를 이용하는 동안 세션이 자동으로 갱신되어 불필요한 재로그인을 방지해야 합니다.

**Why this priority**: 사용자 경험과 보안을 동시에 보장하는 핵심 기능입니다. 세션 관리가 없으면 사용자는 매번 로그인해야 하거나, 보안이 취약해집니다.

**Independent Test**: 사용자가 로그인한 후 일정 시간 동안 서비스를 사용할 때 자동으로 세션이 갱신되는지, 그리고 장시간 미사용 후에는 재로그인이 요구되는지 확인합니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 로그인한 상태에서, **When** 짧은 토큰 만료 시간이 다가오면, **Then** 백그라운드에서 자동으로 토큰이 갱신되고 사용자는 계속 서비스를 이용할 수 있습니다.

2. **Given** 사용자가 로그인한 상태에서, **When** 장시간(예: 7일) 동안 서비스를 사용하지 않으면, **Then** 세션이 만료되고 다음 접속 시 재로그인이 요구됩니다.

3. **Given** 사용자가 로그인한 상태에서, **When** 토큰이 만료되었거나 유효하지 않은 경우, **Then** 자동으로 로그아웃되고 로그인 페이지로 이동합니다.

---

### User Story 4 - 청약 알림 수신 (Priority: P2)

사용자는 관심 있는 청약 정보에 대해 이메일 또는 푸시 알림을 받을 수 있어야 합니다. 신규 청약이 등록되거나 마감이 임박한 경우 자동으로 알림을 받습니다.

**Why this priority**: 사용자 참여도와 서비스 가치를 높이는 중요한 기능이지만, 인증 시스템이 먼저 구축되어야 합니다.

**Independent Test**: 사용자가 알림 설정을 활성화한 후, 신규 청약이 등록되거나 마감이 임박할 때 이메일 또는 푸시 알림을 받는지 확인합니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 알림 설정을 활성화한 상태에서, **When** 사용자의 조건에 맞는 신규 청약이 등록되면, **Then** 이메일 및/또는 푸시 알림이 발송됩니다.

2. **Given** 사용자가 알림 설정을 활성화한 상태에서, **When** 관심 청약의 마감이 24시간 이내로 임박하면, **Then** "곧 마감됩니다" 알림이 발송됩니다.

3. **Given** 사용자가 마이페이지에 접속한 상태에서, **When** 알림 수신 방법(이메일/푸시)을 선택하고 저장하면, **Then** 설정이 저장되고 "알림 설정이 변경되었습니다" 메시지가 표시됩니다.

4. **Given** 사용자가 알림을 수신한 상태에서, **When** 알림을 클릭하면, **Then** 해당 청약 상세 페이지로 이동합니다.

5. **Given** 사용자가 마이페이지에 접속한 상태에서, **When** 모든 알림을 비활성화하면, **Then** 더 이상 알림이 발송되지 않습니다.

---

### Edge Cases

#### 인증/인가 관련
- 동시에 여러 기기에서 로그인한 경우 어떻게 처리할 것인가?
- 비밀번호를 5회 이상 연속으로 틀렸을 때 계정 잠금 처리가 필요한가?
- 소셜 로그인 후 이메일 정보를 제공하지 않는 사용자는 어떻게 처리할 것인가?
- 이미 일반 계정으로 가입한 이메일로 소셜 로그인을 시도하면 어떻게 처리할 것인가?

#### 데이터 경계값 처리
- 청약 조건에서 소득이 정확히 경계값과 일치하는 경우 (예: 소득 상한이 5000만원이고 사용자 소득이 정확히 5000만원인 경우) 매칭에 포함되는가 제외되는가?
- 나이, 부양가족 수 등 다른 숫자 조건에서도 동일한 경계값 처리 규칙이 적용되는가?

#### 매칭 결과
- 사용자 조건에 맞는 청약이 0개일 때 어떤 메시지와 대안을 제시할 것인가?
- 매칭 결과가 100개 이상으로 매우 많을 때 어떻게 표시할 것인가?

#### 알림 시스템
- 같은 청약에 대해 중복 알림이 발송되지 않도록 어떻게 관리할 것인가?
- 알림 발송이 실패한 경우 재시도 정책은 어떻게 할 것인가?
- 사용자가 탈퇴한 후 예약된 알림은 어떻게 처리할 것인가?

#### 시스템 에러
- 외부 소셜 로그인 서비스(Google, Kakao)가 일시적으로 다운된 경우 어떻게 처리할 것인가?
- 데이터베이스 연결이 끊어진 경우 사용자에게 어떤 메시지를 표시할 것인가?
- 캐시(Redis) 서버가 다운된 경우 서비스는 계속 동작할 수 있는가?

## Requirements *(mandatory)*

### Functional Requirements

#### 인증/인가 시스템 (Critical)

- **FR-001**: 시스템은 이메일과 비밀번호를 사용한 회원가입 기능을 제공해야 합니다.
- **FR-002**: 시스템은 이메일 형식의 유효성을 검증해야 합니다.
- **FR-003**: 시스템은 비밀번호가 최소 8자 이상이며 영문, 숫자, 특수문자를 포함하는지 검증해야 합니다.
- **FR-004**: 시스템은 등록된 사용자의 이메일과 비밀번호를 검증하여 로그인 기능을 제공해야 합니다.
- **FR-005**: 시스템은 로그인 성공 시 Access Token과 Refresh Token을 발급해야 합니다.
- **FR-006**: 시스템은 Access Token의 유효기간을 1시간으로 설정해야 합니다.
- **FR-007**: 시스템은 Refresh Token의 유효기간을 7일로 설정해야 합니다.
- **FR-008**: 시스템은 Refresh Token을 사용하여 새로운 Access Token을 발급하는 기능을 제공해야 합니다.
- **FR-009**: 시스템은 로그아웃 시 발급된 토큰을 무효화해야 합니다.
- **FR-010**: 시스템은 인증이 필요한 API 요청에 대해 유효한 Access Token을 검증해야 합니다.
- **FR-011**: 시스템은 유효하지 않거나 만료된 토큰으로 요청 시 401 Unauthorized 응답을 반환해야 합니다.

#### OAuth 2.0 소셜 로그인 (High Priority)

- **FR-012**: 시스템은 Google OAuth 2.0을 통한 회원가입 및 로그인 기능을 제공해야 합니다.
- **FR-013**: 시스템은 Kakao OAuth 2.0을 통한 회원가입 및 로그인 기능을 제공해야 합니다.
- **FR-014**: 시스템은 소셜 로그인 시 사용자의 기본 정보(이름, 이메일)를 자동으로 가져와야 합니다.
- **FR-015**: 시스템은 동일한 이메일로 여러 로그인 방법을 시도할 때 사용자에게 계정 연동 여부를 선택하도록 해야 합니다. 이미 가입된 이메일로 다른 방법(일반/Google/Kakao)으로 로그인 시도 시 "이미 가입된 이메일입니다. 기존 계정과 연동하시겠습니까?" 메시지를 표시하고, 사용자가 연동을 승인하면 계정을 통합하고, 거부하면 로그인을 취소해야 합니다.
- **FR-016**: 시스템은 소셜 로그인 인증 실패 시 사용자에게 명확한 오류 메시지를 표시해야 합니다.

#### 알림 시스템 (High Priority)

- **FR-017**: 시스템은 사용자가 알림 수신 방법(이메일, 푸시)을 선택할 수 있는 설정 기능을 제공해야 합니다.
- **FR-018**: 시스템은 신규 청약이 등록될 때 Domain Event(SubscriptionCreated)를 발행하고, 알림 설정을 활성화한 사용자에게 알림을 발송해야 합니다.
- **FR-019**: 시스템은 청약 마감이 24시간 이내로 임박했을 때 관련 사용자에게 알림을 발송해야 합니다.
- **FR-020**: 시스템은 이메일 알림 발송 기능을 제공해야 합니다 (MVP 단계에서 구현).
- **FR-021**: 시스템은 푸시 알림을 위한 인터페이스를 정의해야 하며, 실제 발송 구현은 향후 확장으로 남겨둡니다.
- **FR-022**: 시스템은 동일한 청약에 대해 중복 알림이 발송되지 않도록 관리해야 합니다.
- **FR-023**: 시스템은 알림 발송 실패 시 최대 3회까지 재시도해야 합니다.
- **FR-024**: 시스템은 사용자가 알림을 통해 해당 청약 상세 페이지로 이동할 수 있는 링크를 제공해야 합니다.

#### Edge Case 및 에러 처리 (High Priority)

- **FR-025**: 시스템은 청약 조건의 경계값 처리 규칙을 명확히 정의해야 합니다 (예: 소득 상한 5000만원일 때 정확히 5000만원은 포함 또는 제외).
- **FR-026**: 시스템은 사용자 조건에 맞는 청약이 0개일 때 "현재 조건에 맞는 청약이 없습니다. 조건을 변경하거나 알림을 설정하여 새로운 청약을 받아보세요"와 같은 명확한 메시지를 표시해야 합니다.
- **FR-027**: 시스템은 모든 API 에러 응답을 표준화된 형식으로 반환해야 합니다 (예: { "error": { "code": "ERROR_CODE", "message": "사용자 친화적 메시지", "details": {} } }).
- **FR-028**: 시스템은 비밀번호 연속 실패 횟수를 추적하고 5회 실패 시 계정을 일시적으로 잠가야 합니다.
- **FR-029**: 시스템은 잠긴 계정에 대해 [NEEDS CLARIFICATION: 계정 잠금 해제 방법 - 시간 기반(예: 30분 후 자동 해제) vs 이메일 인증 vs 관리자 승인] 제공해야 합니다.
- **FR-030**: 시스템은 외부 서비스(소셜 로그인, 이메일 발송) 장애 시 적절한 폴백 메커니즘과 사용자 안내를 제공해야 합니다.

#### 인프라 및 데이터 저장 (High Priority)

- **FR-031**: 시스템은 사용자 계정 정보, 인증 기록, 청약 데이터를 영구 저장소에 보관해야 합니다.
- **FR-032**: 시스템은 세션 및 토큰 정보를 빠른 조회가 가능한 캐시 저장소에 보관해야 합니다.
- **FR-033**: 시스템은 사용자 프로필 이미지, 청약 관련 첨부파일 등 정적 파일을 별도의 객체 저장소에 보관해야 합니다.
- **FR-034**: 시스템은 비밀번호를 안전하게 해시화하여 저장해야 합니다 (평문 저장 금지).
- **FR-035**: 시스템은 민감한 개인정보(이름, 이메일, 전화번호)를 암호화하여 저장해야 합니다.

### Key Entities

- **User (사용자)**: 시스템을 사용하는 개인을 나타냅니다. 이메일, 비밀번호(nullable, 소셜 로그인 시 null), 이름, provider(일반/GOOGLE/KAKAO), providerId(소셜 로그인 시 제공자의 사용자 ID), 가입일시, 마지막 로그인 일시, 계정 상태(활성/잠김/탈퇴) 등의 속성을 가집니다. 기존 User 엔티티를 확장하여 소셜 로그인을 지원합니다.

- **AuthToken (인증 토큰)**: 사용자 인증 상태를 나타냅니다. Refresh Token만 Redis에 저장되며(Access Token은 클라이언트만 보유), 사용자 식별자, 토큰 값, 발급 일시, 만료 일시(7일 TTL) 등의 속성을 가집니다. Redis의 TTL 기능으로 만료된 토큰은 자동 삭제됩니다.

- **Notification (알림)**: 사용자에게 발송되는 알림을 나타냅니다. 사용자 식별자, 알림 타입(신규 청약/마감 임박), 알림 제목, 알림 내용, 관련 청약 식별자, 발송 방법(이메일/푸시), 발송 상태(대기/성공/실패), 발송 일시 등의 속성을 가집니다. User 및 청약 엔티티와 연관됩니다.

- **NotificationSetting (알림 설정)**: 사용자의 알림 수신 설정을 나타냅니다. 사용자 식별자, 이메일 알림 활성화 여부, 푸시 알림 활성화 여부(향후 확장용), 신규 청약 알림 활성화 여부, 마감 임박 알림 활성화 여부 등의 속성을 가집니다. 기존 UserProfile.notificationsEnabled를 확장하여 구현합니다.

- **LoginHistory (로그인 기록)**: 사용자의 로그인 이력을 나타냅니다. 사용자 식별자, 로그인 일시, 로그인 방법(일반/Google/Kakao), 로그인 성공 여부, IP 주소, 사용 기기 정보 등의 속성을 가집니다. 보안 감사 및 이상 로그인 탐지에 사용됩니다.

- **청약 (Subscription Offering)**: 청약 공고 정보를 나타냅니다. 제목, 내용, 시작일, 마감일, 자격 조건(소득, 나이, 부양가족 수 등), 상태(진행중/마감) 등의 속성을 가집니다. Notification 엔티티와 연관됩니다.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자는 회원가입부터 로그인까지 3분 이내에 완료할 수 있어야 합니다.
- **SC-002**: 소셜 로그인을 사용하는 사용자는 클릭 3회 이내로 로그인을 완료할 수 있어야 합니다.
- **SC-003**: 로그인 요청에 대한 응답 시간은 평균 500ms 이하여야 합니다.
- **SC-004**: 시스템은 동시에 1,000명 이상의 사용자 로그인을 처리할 수 있어야 합니다.
- **SC-005**: 토큰 갱신은 사용자가 인지하지 못하도록 백그라운드에서 자동으로 처리되어야 합니다 (응답 지연 없음).
- **SC-006**: 알림 발송 성공률은 95% 이상이어야 합니다 (발송 시도 대비 성공).
- **SC-007**: 신규 청약 등록 후 30분 이내에 모든 해당 사용자에게 알림이 발송되어야 합니다.
- **SC-008**: 마감 임박 알림은 마감 24시간 전 정시(예: 오전 9시)에 발송되어야 합니다.
- **SC-009**: 에러 메시지는 사용자가 이해하고 다음 행동을 취할 수 있도록 명확해야 합니다 (고객 지원 문의 30% 감소 목표).
- **SC-010**: 비밀번호 찾기 및 계정 복구 프로세스는 10분 이내에 완료될 수 있어야 합니다.
- **SC-011**: 시스템 장애 발생 시에도 사용자는 명확한 안내 메시지를 받고 대안 경로를 파악할 수 있어야 합니다.
- **SC-012**: 사용자 데이터는 업계 표준 암호화 기준을 준수하여 보호되어야 합니다.

## Assumptions

1. **토큰 저장소**: Access Token은 클라이언트 메모리에, Refresh Token은 HttpOnly 쿠키 또는 보안 저장소에 저장하는 것으로 가정합니다.

2. **동시 로그인**: 한 계정으로 여러 기기에서 동시 로그인이 가능한 것으로 가정합니다. 단, 보안상 의심스러운 경우(다른 국가에서 동시 로그인 등) 경고 알림을 발송합니다.

3. **경계값 처리**: 청약 조건의 모든 경계값은 "이하/이상" 개념으로 포함하는 것으로 가정합니다 (예: 소득 5000만원 이하 = 5000만원 포함).

4. **알림 우선순위**: 이메일과 푸시 알림 둘 다 활성화된 경우 두 채널 모두로 발송하는 것으로 가정합니다.

5. **데이터 보존**: 탈퇴한 사용자의 데이터는 법적 요구사항에 따라 즉시 삭제하거나 익명화하는 것으로 가정합니다.

6. **인프라 역할**:
   - MySQL: 사용자 계정(User, UserProfile), 청약 데이터(Subscription), 알림 기록(Notification), 로그인 이력(LoginHistory) 등 영구 저장이 필요한 모든 데이터
   - Redis: Refresh Token(7일 TTL), 로그인 시도 횟수(계정 잠금용), 세션 데이터 등 빠른 조회가 필요하고 자동 만료되어야 하는 임시 데이터
   - S3: 프로필 이미지, 청약 첨부파일 등 정적 파일

7. **비밀번호 정책**: 비밀번호는 bcrypt 또는 이와 동등한 보안 수준의 해시 알고리즘을 사용하여 저장하는 것으로 가정합니다.

8. **계정 잠금 해제**: 비밀번호 5회 실패로 잠긴 계정은 30분 후 자동으로 해제되거나, 이메일 인증을 통해 즉시 해제할 수 있는 것으로 가정합니다.

## Dependencies

1. **외부 서비스**:
   - Google OAuth 2.0 API 및 클라이언트 ID/Secret
   - Kakao OAuth 2.0 API 및 앱 키
   - 이메일 발송 서비스 (예: SendGrid, AWS SES 등)
   - 푸시 알림 서비스 (예: FCM, APNs 등)

2. **인프라 구성요소**:
   - MySQL 데이터베이스 (버전 8.0 이상 권장)
   - Redis 캐시 서버 (버전 6.0 이상 권장)
   - AWS S3 또는 호환 객체 스토리지

3. **기존 시스템**:
   - 청약 정보 관리 시스템 (신규 청약 등록, 마감 정보 제공)
   - 사용자 조건 매칭 시스템 (청약과 사용자 조건 비교)

4. **기존 코드베이스 통합** (DDD 전환 전략):
   - **기존 User 도메인**: User, UserProfile 엔티티 재사용 및 확장 (provider, providerId 필드 추가)
   - **기존 JWT 인프라**: JwtService, JwtAuthenticationFilter 활용
   - **기존 CQRS 패턴**: UserCommandService, UserQueryService 패턴 준수
   - **새로운 Authentication Bounded Context**: 회원가입/로그인 로직을 독립적인 도메인으로 분리
   - **기존 Notification 플래그**: UserProfile.notificationsEnabled 확장하여 알림 시스템 구현
   - **기존 Async 인프라**: AsyncConfig 활용하여 알림 발송 비동기 처리
   - **Domain Event 패턴**: Spring ApplicationEventPublisher를 활용하여 SubscriptionCreated 이벤트 기반 알림 발송

## Out of Scope

이 기능에서 다루지 **않는** 항목들:

1. **다중 인증(MFA)**: 2단계 인증, OTP 등은 이번 스펙에 포함되지 않습니다.
2. **비밀번호 변경 기능**: 기존 사용자의 비밀번호 변경은 별도 기능으로 분리합니다.
3. **회원 프로필 관리**: 이름, 전화번호, 주소 등 상세 프로필 정보 수정 기능은 포함되지 않습니다.
4. **관리자 기능**: 사용자 관리, 계정 승인/차단 등 관리자 페이지는 포함되지 않습니다.
5. **알림 이력 조회**: 사용자가 과거에 받은 알림 목록을 조회하는 기능은 포함되지 않습니다.
6. **맞춤형 알림 설정**: 특정 지역, 특정 가격대 등 세밀한 알림 조건 설정은 포함되지 않습니다.
7. **소셜 계정 연동 해제**: 이미 연동된 소셜 계정을 해제하는 기능은 포함되지 않습니다.
8. **Apple 로그인**: Google, Kakao 외 다른 소셜 로그인은 포함되지 않습니다.
